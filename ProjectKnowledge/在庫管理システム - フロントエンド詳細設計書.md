# åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è©³ç´°è¨­è¨ˆæ›¸

## ğŸ¯ è¨­è¨ˆæ¦‚è¦

### ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“åƒ
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Node.js + Express + MySQLï¼ˆå®Œæˆæ¸ˆã¿ï¼‰
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Next.js 15.4.4 + React 19 + TypeScript 5.7
- **API**: JWTèªè¨¼ + 4æ®µéšæ¨©é™ç®¡ç† + çµ±åˆå…¥è·å‡¦ç†API
- **Dockerç’°å¢ƒ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆãƒãƒ¼ãƒˆ3001ï¼‰ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆãƒãƒ¼ãƒˆ3000ï¼‰

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
```typescript
// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“æ§‹æˆ
Framework: Next.js 15.4.4 (App Router)
UI Library: React 19.0.0
Language: TypeScript 5.7.0
Styling: Tailwind CSS 3.4.15
State Management: React Context API + Custom Hooks
API Client: Fetch API + Custom API Class
Form Management: React Hook Form (äºˆå®š)
Data Visualization: Recharts (äºˆå®š)
Testing: Jest + React Testing Library (äºˆå®š)
```

---

## ğŸ“‚ ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆè¨­è¨ˆ

```
src/
â”œâ”€â”€ app/                         # App Router (Next.js 15)
â”‚   â”œâ”€â”€ (auth)/                 # èªè¨¼é–¢é€£ç”»é¢ï¼ˆRoute Groupsï¼‰
â”‚   â”‚   â””â”€â”€ login/              # ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ dashboard/              # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ inventory/              # åœ¨åº«ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ page.tsx           # åœ¨åº«ç®¡ç†ãƒˆãƒƒãƒ—
â”‚   â”‚   â”œâ”€â”€ list/              # åœ¨åº«ä¸€è¦§
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ receipt/           # å…¥è·å‡¦ç†
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ transactions/      # åœ¨åº«å±¥æ­´
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ loading.tsx        # ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°UI
â”‚   â”œâ”€â”€ production/             # ç”Ÿç”£è¨ˆç”»ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ plans/             # è¨ˆç”»ä¸€è¦§ãƒ»ç™»éŒ²
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ create/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ requirements/      # æ‰€è¦é‡è¨ˆç®—
â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ procurement/            # èª¿é”ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ scheduled-receipts/ # äºˆå®šå…¥è·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ create/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ alerts/            # ç™ºæ³¨ã‚¢ãƒ©ãƒ¼ãƒˆ
â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ masters/               # ãƒã‚¹ã‚¿ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ parts/             # éƒ¨å“ãƒã‚¹ã‚¿
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ create/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ products/          # è£½å“ãƒã‚¹ã‚¿
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ bom/               # BOMç®¡ç†
â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ reports/               # å¸³ç¥¨ãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ inventory/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ shortage/
â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ layout.tsx             # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ page.tsx              # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
â”‚   â”œâ”€â”€ globals.css           # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ loading.tsx           # å…±é€šãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
â”‚   â”œâ”€â”€ error.tsx             # å…±é€šã‚¨ãƒ©ãƒ¼
â”‚   â””â”€â”€ not-found.tsx         # 404ãƒšãƒ¼ã‚¸
â”œâ”€â”€ components/                # å†åˆ©ç”¨å¯èƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/                   # åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”œâ”€â”€ Table.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”œâ”€â”€ Alert.tsx
â”‚   â”‚   â”œâ”€â”€ Badge.tsx
â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”œâ”€â”€ Select.tsx
â”‚   â”‚   â”œâ”€â”€ Textarea.tsx
â”‚   â”‚   â”œâ”€â”€ Checkbox.tsx
â”‚   â”‚   â”œâ”€â”€ Radio.tsx
â”‚   â”‚   â”œâ”€â”€ Switch.tsx
â”‚   â”‚   â”œâ”€â”€ Tabs.tsx
â”‚   â”‚   â”œâ”€â”€ Pagination.tsx
â”‚   â”‚   â”œâ”€â”€ Spinner.tsx
â”‚   â”‚   â””â”€â”€ Tooltip.tsx
â”‚   â”œâ”€â”€ forms/                # ãƒ•ã‚©ãƒ¼ãƒ é–¢é€£
â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”œâ”€â”€ InventoryForm.tsx
â”‚   â”‚   â”œâ”€â”€ InventoryReceiptForm.tsx
â”‚   â”‚   â”œâ”€â”€ ProductionPlanForm.tsx
â”‚   â”‚   â”œâ”€â”€ ScheduledReceiptForm.tsx
â”‚   â”‚   â”œâ”€â”€ PartForm.tsx
â”‚   â”‚   â””â”€â”€ BOMForm.tsx
â”‚   â”œâ”€â”€ tables/               # ãƒ†ãƒ¼ãƒ–ãƒ«é–¢é€£
â”‚   â”‚   â”œâ”€â”€ InventoryTable.tsx
â”‚   â”‚   â”œâ”€â”€ ProductionPlanTable.tsx
â”‚   â”‚   â”œâ”€â”€ ScheduledReceiptTable.tsx
â”‚   â”‚   â”œâ”€â”€ TransactionTable.tsx
â”‚   â”‚   â”œâ”€â”€ PartTable.tsx
â”‚   â”‚   â””â”€â”€ DataTable.tsx     # æ±ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚   â”œâ”€â”€ charts/               # ã‚°ãƒ©ãƒ•ãƒ»ãƒãƒ£ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ InventoryChart.tsx
â”‚   â”‚   â”œâ”€â”€ DashboardCharts.tsx
â”‚   â”‚   â”œâ”€â”€ ProductionChart.tsx
â”‚   â”‚   â””â”€â”€ TrendChart.tsx
â”‚   â”œâ”€â”€ layout/               # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ Breadcrumb.tsx
â”‚   â”‚   â”œâ”€â”€ Navigation.tsx
â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â”œâ”€â”€ guards/               # æ¨©é™åˆ¶å¾¡
â”‚   â”‚   â”œâ”€â”€ RouteGuard.tsx
â”‚   â”‚   â””â”€â”€ PermissionGuard.tsx
â”‚   â””â”€â”€ providers/            # Providerç³»
â”‚       â”œâ”€â”€ AuthProvider.tsx
â”‚       â””â”€â”€ QueryProvider.tsx
â”œâ”€â”€ hooks/                    # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ useAuth.ts           # èªè¨¼ç®¡ç†
â”‚   â”œâ”€â”€ usePermissions.ts    # æ¨©é™ç®¡ç†
â”‚   â”œâ”€â”€ useApi.ts            # APIå‘¼ã³å‡ºã—
â”‚   â”œâ”€â”€ useInventory.ts      # åœ¨åº«é–¢é€£
â”‚   â”œâ”€â”€ useProduction.ts     # ç”Ÿç”£è¨ˆç”»é–¢é€£
â”‚   â”œâ”€â”€ useProcurement.ts    # èª¿é”é–¢é€£
â”‚   â”œâ”€â”€ useParts.ts          # éƒ¨å“ãƒã‚¹ã‚¿é–¢é€£
â”‚   â”œâ”€â”€ useReports.ts        # ãƒ¬ãƒãƒ¼ãƒˆé–¢é€£
â”‚   â”œâ”€â”€ useLocalStorage.ts   # ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
â”‚   â”œâ”€â”€ useDebounce.ts       # ãƒ‡ãƒã‚¦ãƒ³ã‚¹
â”‚   â””â”€â”€ usePagination.ts     # ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ lib/                     # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»è¨­å®š
â”‚   â”œâ”€â”€ api.ts              # APIåŸºæœ¬è¨­å®š
â”‚   â”œâ”€â”€ auth.ts             # èªè¨¼é–¢é€£
â”‚   â”œâ”€â”€ constants.ts        # å®šæ•°å®šç¾©
â”‚   â”œâ”€â”€ utils.ts            # æ±ç”¨é–¢æ•°
â”‚   â”œâ”€â”€ validations.ts      # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ formatters.ts       # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚   â””â”€â”€ date.ts             # æ—¥ä»˜æ“ä½œ
â”œâ”€â”€ types/                   # TypeScriptå‹å®šç¾©
â”‚   â”œâ”€â”€ api.ts              # APIé–¢é€£å‹
â”‚   â”œâ”€â”€ auth.ts             # èªè¨¼é–¢é€£å‹
â”‚   â”œâ”€â”€ inventory.ts        # åœ¨åº«é–¢é€£å‹
â”‚   â”œâ”€â”€ production.ts       # ç”Ÿç”£è¨ˆç”»é–¢é€£å‹
â”‚   â”œâ”€â”€ procurement.ts      # èª¿é”é–¢é€£å‹
â”‚   â”œâ”€â”€ parts.ts            # éƒ¨å“é–¢é€£å‹
â”‚   â”œâ”€â”€ reports.ts          # ãƒ¬ãƒãƒ¼ãƒˆé–¢é€£å‹
â”‚   â””â”€â”€ common.ts           # å…±é€šå‹
â”œâ”€â”€ constants/               # å®šæ•°ãƒ»è¨­å®š
â”‚   â”œâ”€â”€ api-endpoints.ts    # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ permissions.ts      # æ¨©é™å®šç¾©
â”‚   â”œâ”€â”€ routes.ts           # ãƒ«ãƒ¼ãƒˆå®šç¾©
â”‚   â”œâ”€â”€ messages.ts         # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å®šç¾©
â”‚   â””â”€â”€ status.ts           # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å®šç¾©
â”œâ”€â”€ utils/                   # ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
â”‚   â”œâ”€â”€ formatters.ts       # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚   â”œâ”€â”€ validators.ts       # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ converters.ts       # ãƒ‡ãƒ¼ã‚¿å¤‰æ›
â”‚   â”œâ”€â”€ calculations.ts     # è¨ˆç®—å‡¦ç†
â”‚   â””â”€â”€ exports.ts          # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
â””â”€â”€ services/                # APIé€šä¿¡ãƒ­ã‚¸ãƒƒã‚¯
    â”œâ”€â”€ auth.service.ts     # èªè¨¼API
    â”œâ”€â”€ inventory.service.ts # åœ¨åº«API
    â”œâ”€â”€ production.service.ts # ç”Ÿç”£è¨ˆç”»API
    â”œâ”€â”€ procurement.service.ts # èª¿é”API
    â”œâ”€â”€ parts.service.ts    # éƒ¨å“ãƒã‚¹ã‚¿API
    â””â”€â”€ reports.service.ts  # ãƒ¬ãƒãƒ¼ãƒˆAPI
```

---

## ğŸ” èªè¨¼ãƒ»æ¨©é™è¨­è¨ˆ

### æ¨©é™ãƒ¬ãƒ™ãƒ«å®šç¾©
```typescript
export type UserRole = 'admin' | 'production_manager' | 'material_staff' | 'viewer'

interface User {
  id: number
  username: string
  email: string
  role: UserRole
  name: string
}

// æ¨©é™ãƒãƒˆãƒªãƒƒã‚¯ã‚¹
const PERMISSION_MATRIX = {
  admin: {
    inventory: ['view', 'create', 'update', 'delete'],
    production: ['view', 'create', 'update', 'delete'],
    procurement: ['view', 'create', 'update', 'delete'],
    masters: ['view', 'create', 'update', 'delete'],
    reports: ['view', 'export'],
    system: ['users', 'settings']
  },
  production_manager: {
    inventory: ['view'],
    production: ['view', 'create', 'update', 'delete'],
    procurement: ['view'],
    masters: ['view'],
    reports: ['view', 'export']
  },
  material_staff: {
    inventory: ['view', 'create', 'update'],
    production: ['view'],
    procurement: ['view', 'create', 'update'],
    masters: ['view'],
    reports: ['view', 'export']
  },
  viewer: {
    inventory: ['view'],
    production: ['view'],
    procurement: ['view'],
    masters: ['view'],
    reports: ['view']
  }
} as const
```

### èªè¨¼ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ
```typescript
// 1. ãƒ­ã‚°ã‚¤ãƒ³
POST /api/auth/login
Request: { username: string, password: string }
Response: {
  success: boolean
  data: {
    user: User
    tokens: {
      accessToken: string
      refreshToken: string
      expiresIn: string
    }
  }
}

// 2. ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
GET /api/auth/me
Headers: { Authorization: "Bearer <token>" }
Response: { success: boolean, data: { user: User } }

// 3. ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
POST /api/auth/logout
Headers: { Authorization: "Bearer <token>" }
Response: { success: boolean, message: string }
```

### æ¨©é™åˆ¶å¾¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ
```typescript
// ãƒšãƒ¼ã‚¸ãƒ¬ãƒ™ãƒ«åˆ¶å¾¡
<RouteGuard requireAuth={true} allowedRoles={['admin', 'material_staff']}>
  <InventoryPage />
</RouteGuard>

// UIãƒ¬ãƒ™ãƒ«åˆ¶å¾¡
<PermissionGuard requiredPermissions={['inventory.create']}>
  <Button>æ–°è¦ç™»éŒ²</Button>
</PermissionGuard>

// ä¾¿åˆ©ãªã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
<AdminOnly>
  <AdminPanel />
</AdminOnly>

<MaterialStaffOnly>
  <InventoryForm />
</MaterialStaffOnly>
```

---

## ğŸ“¡ APIé€£æºè¨­è¨ˆ

### APIåŸºç›¤ã‚¯ãƒ©ã‚¹è¨­è¨ˆ
```typescript
class ApiClient {
  private baseURL: string
  private getToken(): string | null
  private request<T>(endpoint: string, options?: RequestOptions): Promise<ApiResponse<T>>
  
  // HTTP Methods
  async get<T>(endpoint: string, requireAuth?: boolean): Promise<ApiResponse<T>>
  async post<T>(endpoint: string, body?: any, requireAuth?: boolean): Promise<ApiResponse<T>>
  async put<T>(endpoint: string, body?: any, requireAuth?: boolean): Promise<ApiResponse<T>>
  async delete<T>(endpoint: string, requireAuth?: boolean): Promise<ApiResponse<T>>
  
  // èªè¨¼é–¢é€£
  isAuthenticated(): boolean
  getCurrentUser(): User | null
  logout(): void
}

// ä½¿ç”¨ä¾‹
const api = new ApiClient('http://localhost:3000')
const inventory = await api.get<InventoryItem[]>('/api/inventory')
```

### ä¸»è¦APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```typescript
// èªè¨¼API
POST /api/auth/login
GET /api/auth/me
POST /api/auth/logout

// åœ¨åº«ç®¡ç†API
GET /api/inventory                               # åœ¨åº«ä¸€è¦§
GET /api/inventory/:part_code                    # åœ¨åº«è©³ç´°
POST /api/inventory/:part_code/integrated-receipt # çµ±åˆå…¥è·å‡¦ç†
POST /api/inventory/:part_code/issue             # å‡ºåº«å‡¦ç†
GET /api/inventory/:part_code/transactions       # åœ¨åº«å±¥æ­´

// äºˆå®šå…¥è·API
GET /api/scheduled-receipts                      # äºˆå®šå…¥è·ä¸€è¦§
POST /api/scheduled-receipts                     # ç™ºæ³¨ç™»éŒ²
PUT /api/scheduled-receipts/:id                  # äºˆå®šå…¥è·æ›´æ–°
DELETE /api/scheduled-receipts/:id               # äºˆå®šå…¥è·å‰Šé™¤

// ç”Ÿç”£è¨ˆç”»API
GET /api/plans                                   # ç”Ÿç”£è¨ˆç”»ä¸€è¦§
POST /api/plans                                  # ç”Ÿç”£è¨ˆç”»ç™»éŒ²
PUT /api/plans/:id                               # ç”Ÿç”£è¨ˆç”»æ›´æ–°
POST /api/plans/:id/requirements                 # æ‰€è¦é‡è¨ˆç®—

// éƒ¨å“ãƒã‚¹ã‚¿API
GET /api/parts                                   # éƒ¨å“ä¸€è¦§
POST /api/parts                                  # éƒ¨å“ç™»éŒ²
PUT /api/parts/:id                               # éƒ¨å“æ›´æ–°
DELETE /api/parts/:id                            # éƒ¨å“å‰Šé™¤

// ãƒ¬ãƒãƒ¼ãƒˆAPI
GET /api/reports/dashboard                       # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
GET /api/reports/shortage-parts                  # ä¸è¶³éƒ¨å“ãƒ¬ãƒãƒ¼ãƒˆ
GET /api/reports/inventory-summary               # åœ¨åº«ã‚µãƒãƒªãƒ¼
```

### çµ±åˆå…¥è·å‡¦ç†APIè¨­è¨ˆ
```typescript
// çµ±åˆå…¥è·å‡¦ç†ï¼ˆæœ€é‡è¦æ©Ÿèƒ½ï¼‰
interface IntegratedReceiptRequest {
  quantity: number
  supplier: string
  receipt_date: string
  scheduled_receipt_id?: number  // äºˆå®šå…¥è·é€£æºæ™‚ã®ã¿
  remarks?: string
}

interface IntegratedReceiptResponse {
  success: boolean
  data: {
    transaction_id: number
    updated_inventory: InventoryItem
    updated_scheduled_receipt?: ScheduledReceipt
  }
  message: string
}

// APIå‘¼ã³å‡ºã—ä¾‹
const result = await api.post<IntegratedReceiptResponse>(
  `/api/inventory/${partCode}/integrated-receipt`,
  {
    quantity: 50,
    supplier: "Sample Supplier",
    receipt_date: "2025-08-15",
    scheduled_receipt_id: 123,
    remarks: "çµ±åˆå…¥è·å‡¦ç†"
  }
)
```

---

## ğŸ¨ UI/UXè¨­è¨ˆ

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
```typescript
// ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
const colors = {
  primary: {
    50: '#eff6ff',
    500: '#3b82f6',
    600: '#2563eb',
    700: '#1d4ed8'
  },
  success: {
    50: '#f0fdf4',
    500: '#22c55e',
    600: '#16a34a'
  },
  warning: {
    50: '#fffbeb',
    500: '#f59e0b',
    600: '#d97706'
  },
  danger: {
    50: '#fef2f2',
    500: '#ef4444',
    600: '#dc2626'
  }
}

// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¯ãƒ©ã‚¹
.btn-primary     # ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³
.btn-secondary   # ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒœã‚¿ãƒ³
.btn-danger      # å±é™ºæ“ä½œãƒœã‚¿ãƒ³
.card-base       # ã‚«ãƒ¼ãƒ‰å‹ã‚³ãƒ³ãƒ†ãƒŠ
.input-base      # å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
.table-base      # ãƒ†ãƒ¼ãƒ–ãƒ«
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­è¨ˆ
```typescript
// ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ
const breakpoints = {
  sm: '640px',   // ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆç¸¦ï¼‰
  md: '768px',   // ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆæ¨ªï¼‰
  lg: '1024px',  // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆå°ï¼‰
  xl: '1280px',  // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆå¤§ï¼‰
  '2xl': '1536px' // ãƒ¯ã‚¤ãƒ‰ã‚¹ã‚¯ãƒªãƒ¼ãƒ³
}

// å¯¾å¿œæ–¹é‡
Desktop First: 1280pxä»¥ä¸Šã‚’åŸºæº–ã«è¨­è¨ˆ
Tablet: 768px-1279pxï¼ˆä¸»è¦æ©Ÿèƒ½å¯¾å¿œï¼‰
Mobile: 767pxä»¥ä¸‹ï¼ˆåŸºæœ¬æ©Ÿèƒ½ã®ã¿ï¼‰
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// Compound Component Pattern
<DataTable>
  <DataTable.Header>
    <DataTable.Column sortable>éƒ¨å“ã‚³ãƒ¼ãƒ‰</DataTable.Column>
    <DataTable.Column>éƒ¨å“å</DataTable.Column>
  </DataTable.Header>
  <DataTable.Body>
    {data.map(item => (
      <DataTable.Row key={item.id}>
        <DataTable.Cell>{item.code}</DataTable.Cell>
        <DataTable.Cell>{item.name}</DataTable.Cell>
      </DataTable.Row>
    ))}
  </DataTable.Body>
</DataTable>

// Render Props Pattern
<DataProvider
  query="/api/inventory"
  render={({ data, loading, error }) => (
    <InventoryTable data={data} loading={loading} error={error} />
  )}
/>
```

---

## ğŸ“± ç”»é¢è¨­è¨ˆä»•æ§˜

### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ
```typescript
interface NavigationItem {
  id: string
  label: string
  icon: string
  path: string
  requiredPermissions?: string[]
  children?: NavigationItem[]
}

const navigationItems: NavigationItem[] = [
  {
    id: 'dashboard',
    label: 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',
    icon: 'dashboard',
    path: '/dashboard'
  },
  {
    id: 'inventory',
    label: 'åœ¨åº«ç®¡ç†',
    icon: 'inventory',
    path: '/inventory',
    requiredPermissions: ['inventory.view'],
    children: [
      { id: 'inventory-list', label: 'åœ¨åº«ä¸€è¦§', path: '/inventory/list' },
      { id: 'inventory-receipt', label: 'å…¥è·å‡¦ç†', path: '/inventory/receipt', requiredPermissions: ['inventory.create'] },
      { id: 'inventory-transactions', label: 'åœ¨åº«å±¥æ­´', path: '/inventory/transactions' }
    ]
  },
  {
    id: 'production',
    label: 'ç”Ÿç”£è¨ˆç”»',
    icon: 'production',
    path: '/production',
    requiredPermissions: ['production.view'],
    children: [
      { id: 'production-plans', label: 'è¨ˆç”»ä¸€è¦§', path: '/production/plans' },
      { id: 'production-requirements', label: 'æ‰€è¦é‡è¨ˆç®—', path: '/production/requirements' }
    ]
  },
  {
    id: 'procurement',
    label: 'èª¿é”ç®¡ç†',
    icon: 'procurement',
    path: '/procurement',
    requiredPermissions: ['procurement.view'],
    children: [
      { id: 'scheduled-receipts', label: 'äºˆå®šå…¥è·', path: '/procurement/scheduled-receipts' },
      { id: 'procurement-alerts', label: 'ç™ºæ³¨ã‚¢ãƒ©ãƒ¼ãƒˆ', path: '/procurement/alerts' }
    ]
  },
  {
    id: 'masters',
    label: 'ãƒã‚¹ã‚¿ç®¡ç†',
    icon: 'masters',
    path: '/masters',
    requiredPermissions: ['masters.view'],
    children: [
      { id: 'parts', label: 'éƒ¨å“ãƒã‚¹ã‚¿', path: '/masters/parts' },
      { id: 'products', label: 'è£½å“ãƒã‚¹ã‚¿', path: '/masters/products' },
      { id: 'bom', label: 'BOMç®¡ç†', path: '/masters/bom' }
    ]
  },
  {
    id: 'reports',
    label: 'ãƒ¬ãƒãƒ¼ãƒˆ',
    icon: 'reports',
    path: '/reports',
    requiredPermissions: ['reports.view']
  }
]
```

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­è¨ˆ
```typescript
// ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ
<RootLayout>
  <Header>
    <Logo />
    <Navigation />
    <UserMenu />
  </Header>
  
  <Sidebar>
    <MainNavigation items={navigationItems} />
  </Sidebar>
  
  <Main>
    <Breadcrumb />
    <PageContent>
      {children}
    </PageContent>
  </Main>
  
  <Footer>
    <SystemInfo />
  </Footer>
</RootLayout>
```

---

## ğŸ›  æŠ€è¡“å®Ÿè£…æ–¹é‡

### çŠ¶æ…‹ç®¡ç†è¨­è¨ˆ
```typescript
// èªè¨¼çŠ¶æ…‹: React Context API
interface AuthState {
  user: User | null
  isLoading: boolean
  isAuthenticated: boolean
}

// APIçŠ¶æ…‹: TanStack Queryï¼ˆæ¨å¥¨ï¼‰
const { data, isLoading, error, refetch } = useQuery({
  queryKey: ['inventory', filters],
  queryFn: () => inventoryService.getList(filters),
  staleTime: 5 * 60 * 1000, // 5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
})

// ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹: React Hook Form
const {
  register,
  handleSubmit,
  formState: { errors },
  reset
} = useForm<InventoryReceiptForm>({
  resolver: zodResolver(inventoryReceiptSchema)
})

// ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹: useState
const [filters, setFilters] = useState<InventoryFilters>({})
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°è¨­è¨ˆ
```typescript
// ã‚µãƒ¼ãƒ“ã‚¹å±¤è¨­è¨ˆ
class InventoryService {
  async getList(filters?: InventoryFilters): Promise<InventoryItem[]>
  async getDetail(partCode: string): Promise<InventoryItem>
  async integratedReceipt(partCode: string, data: IntegratedReceiptRequest): Promise<IntegratedReceiptResponse>
  async getTransactions(partCode: string): Promise<Transaction[]>
}

// ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯è¨­è¨ˆ
export function useInventory() {
  const getList = useCallback(async (filters?: InventoryFilters) => {
    return await inventoryService.getList(filters)
  }, [])

  const integratedReceipt = useCallback(async (partCode: string, data: IntegratedReceiptRequest) => {
    return await inventoryService.integratedReceipt(partCode, data)
  }, [])

  return { getList, integratedReceipt }
}
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¨­è¨ˆ
```typescript
// ã‚¨ãƒ©ãƒ¼å¢ƒç•Œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
<ErrorBoundary fallback={<ErrorFallback />}>
  <InventoryPage />
</ErrorBoundary>

// APIã‚¨ãƒ©ãƒ¼å‡¦ç†
try {
  const result = await api.post('/api/inventory/receipt', data)
} catch (error) {
  if (error.status === 401) {
    // èªè¨¼ã‚¨ãƒ©ãƒ¼ â†’ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸
    router.push('/login')
  } else if (error.status === 403) {
    // æ¨©é™ã‚¨ãƒ©ãƒ¼ â†’ æ¨©é™ä¸è¶³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    showError('ã“ã®æ“ä½œã‚’å®Ÿè¡Œã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“')
  } else {
    // ãã®ä»–ã‚¨ãƒ©ãƒ¼ â†’ æ±ç”¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    showError('å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ')
  }
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–è¨­è¨ˆ
```typescript
// ä»®æƒ³åŒ–ï¼ˆå¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œï¼‰
import { FixedSizeList as List } from 'react-window'

// é…å»¶ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
const InventoryDetail = lazy(() => import('./InventoryDetail'))

// ãƒ¡ãƒ¢åŒ–
const MemoizedInventoryTable = memo(InventoryTable, (prevProps, nextProps) => {
  return prevProps.data === nextProps.data
})

// ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
const { data, fetchNextPage, hasNextPage } = useInfiniteQuery({
  queryKey: ['inventory'],
  queryFn: ({ pageParam = 0 }) => inventoryService.getList({ page: pageParam }),
  getNextPageParam: (lastPage, pages) => lastPage.hasMore ? pages.length : undefined
})
```

---

## ğŸ“Š å‹å®šç¾©è¨­è¨ˆ

### å…±é€šå‹å®šç¾©
```typescript
// APIé–¢é€£
interface ApiResponse<T = any> {
  success: boolean
  data?: T
  message: string
  error?: string
}

interface PaginationParams {
  page: number
  limit: number
  sort?: string
  order?: 'asc' | 'desc'
}

interface PaginatedResponse<T> {
  items: T[]
  total: number
  page: number
  limit: number
  totalPages: number
}

// åœ¨åº«é–¢é€£
interface InventoryItem {
  part_code: string
  part_name: string
  current_stock: number
  reserved_stock: number
  available_stock: number
  safety_stock: number
  location: string
  unit: string
  unit_price: number
  last_receipt_date: string | null
  last_issue_date: string | null
  created_at: string
  updated_at: string
}

interface InventoryFilters {
  search?: string
  location?: string
  low_stock?: boolean
  category?: string
}

// å–å¼•å±¥æ­´
interface Transaction {
  id: number
  part_code: string
  transaction_type: 'receipt' | 'issue' | 'adjustment'
  quantity: number
  unit_price: number
  supplier?: string
  reference_id?: string
  remarks?: string
  created_at: string
  created_by: string
}

// ç”Ÿç”£è¨ˆç”»é–¢é€£
interface ProductionPlan {
  id: number
  product_code: string
  product_name: string
  planned_quantity: number
  planned_start_date: string
  planned_end_date: string
  status: 'planned' | 'in_progress' | 'completed' | 'cancelled'
  priority: number
  created_at: string
  updated_at: string
}

// äºˆå®šå…¥è·é–¢é€£
interface ScheduledReceipt {
  id: number
  part_code: string
  part_name: string
  ordered_quantity: number
  received_quantity: number
  remaining_quantity: number
  supplier: string
  order_date: string
  promised_date: string
  actual_date?: string
  status: 'ordered' | 'confirmed' | 'shipped' | 'received' | 'cancelled'
  unit_price: number
  total_amount: number
  created_at: string
  updated_at: string
}
```

---

## ğŸš€ é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»

### Phase 1: èªè¨¼ãƒ»åŸºç›¤ï¼ˆå®Œäº†äºˆå®šï¼‰
- [ ] èªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [ ] æ¨©é™åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [ ] å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®Ÿè£…
- [ ] åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…

### Phase 2: åœ¨åº«ç®¡ç†ï¼ˆæœ€å„ªå…ˆï¼‰
- [ ] åœ¨åº«ä¸€è¦§ç”»é¢
- [ ] çµ±åˆå…¥è·å‡¦ç†ç”»é¢
- [ ] åœ¨åº«å±¥æ­´ç”»é¢
- [ ] åœ¨åº«æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½

### Phase 3: ç”Ÿç”£è¨ˆç”»ç®¡ç†
- [ ] ç”Ÿç”£è¨ˆç”»ä¸€è¦§ç”»é¢
- [ ] ç”Ÿç”£è¨ˆç”»ä½œæˆãƒ»ç·¨é›†ç”»é¢
- [ ] æ‰€è¦é‡è¨ˆç®—æ©Ÿèƒ½
- [ ] BOMå±•é–‹æ©Ÿèƒ½

### Phase 4: èª¿é”ç®¡ç†
- [ ] äºˆå®šå…¥è·ç®¡ç†ç”»é¢
- [ ] ç™ºæ³¨ç™»éŒ²ç”»é¢
- [ ] ç™ºæ³¨ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ç®¡ç†

### Phase 5: ãƒã‚¹ã‚¿ç®¡ç†ãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
- [ ] éƒ¨å“ãƒã‚¹ã‚¿ç®¡ç†
- [ ] è£½å“ãƒã‚¹ã‚¿ç®¡ç†
- [ ] BOMç®¡ç†
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å¼·åŒ–
- [ ] å„ç¨®ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½

### Phase 6: æœ€é©åŒ–ãƒ»é‹ç”¨
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè£…
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- [ ] æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™

---

ã“ã®è¨­è¨ˆæ›¸ã«åŸºã¥ã„ã¦ã€æ®µéšçš„ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ã‚’é€²ã‚ã¾ã™ã€‚

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥è¨­è¨ˆ

### ãƒ†ã‚¹ãƒˆåˆ†é¡
```typescript
// ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
describe('InventoryService', () => {
  test('åœ¨åº«ä¸€è¦§å–å¾—ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹', async () => {
    const mockData = [{ part_code: 'TEST001', current_stock: 100 }]
    jest.spyOn(api, 'get').mockResolvedValue({ success: true, data: mockData })
    
    const result = await inventoryService.getList()
    expect(result).toEqual(mockData)
  })
})

// çµ±åˆãƒ†ã‚¹ãƒˆ
describe('InventoryPage', () => {
  test('åœ¨åº«ä¸€è¦§ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', async () => {
    render(<InventoryPage />)
    
    await waitFor(() => {
      expect(screen.getByText('SUS304-M6-25-HEX')).toBeInTheDocument()
    })
  })
})

// E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightæ¨å¥¨ï¼‰
test('çµ±åˆå…¥è·å‡¦ç†ãƒ•ãƒ­ãƒ¼ãŒæ­£å¸¸ã«å®Œäº†ã™ã‚‹', async ({ page }) => {
  await page.goto('/inventory/receipt')
  await page.fill('[data-testid=part-code]', 'TEST001')
  await page.fill('[data-testid=quantity]', '50')
  await page.click('[data-testid=submit-button]')
  
  await expect(page.locator('[data-testid=success-message]')).toBeVisible()
})
```

### ãƒ†ã‚¹ãƒˆå®Ÿè£…æ–¹é‡
- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: Jest + React Testing Library
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: MSW (Mock Service Worker)
- **E2Eãƒ†ã‚¹ãƒˆ**: Playwright
- **è¦–è¦šå›å¸°ãƒ†ã‚¹ãƒˆ**: Chromatic (Storybook)
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**: 80%ä»¥ä¸Š

---

## ğŸ”§ é–‹ç™ºãƒ„ãƒ¼ãƒ«è¨­å®š

### é–‹ç™ºç’°å¢ƒè¨­å®š
```json
// package.jsonï¼ˆè¿½åŠ äºˆå®šä¾å­˜é–¢ä¿‚ï¼‰
{
  "dependencies": {
    "@hookform/resolvers": "^3.3.2",
    "@tanstack/react-query": "^5.8.4",
    "react-hook-form": "^7.47.0",
    "recharts": "^2.8.0",
    "react-window": "^1.8.8",
    "zod": "^3.22.4",
    "date-fns": "^2.30.0",
    "lucide-react": "^0.294.0"
  },
  "devDependencies": {
    "@testing-library/jest-dom": "^6.1.4",
    "@testing-library/react": "^13.4.0",
    "@testing-library/user-event": "^14.5.1",
    "@playwright/test": "^1.40.0",
    "@storybook/react": "^7.5.3",
    "jest": "^29.7.0",
    "jest-environment-jsdom": "^29.7.0",
    "msw": "^2.0.8"
  }
}
```

### ESLint/Prettierè¨­å®š
```javascript
// .eslintrc.js
module.exports = {
  extends: [
    'next/core-web-vitals',
    '@typescript-eslint/recommended',
    'prettier'
  ],
  rules: {
    '@typescript-eslint/no-unused-vars': 'error',
    '@typescript-eslint/explicit-function-return-type': 'warn',
    'react-hooks/exhaustive-deps': 'error'
  }
}

// .prettierrc
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

### Git ãƒ•ãƒƒã‚¯è¨­å®š
```json
// .husky/pre-commit
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npm run lint
npm run type-check
npm run test:unit
```

---

## ğŸ“¦ ãƒ‡ãƒ—ãƒ­ã‚¤è¨­è¨ˆ

### ç’°å¢ƒåˆ†é›¢
```typescript
// ç’°å¢ƒè¨­å®š
const config = {
  development: {
    API_URL: 'http://localhost:3000',
    APP_URL: 'http://localhost:3001',
    LOG_LEVEL: 'debug'
  },
  staging: {
    API_URL: 'https://staging-api.inventory-system.com',
    APP_URL: 'https://staging.inventory-system.com',
    LOG_LEVEL: 'info'
  },
  production: {
    API_URL: 'https://api.inventory-system.com',
    APP_URL: 'https://inventory-system.com',
    LOG_LEVEL: 'error'
  }
}
```

### Dockerè¨­å®š
```dockerfile
# Dockerfile.frontendï¼ˆæœ¬ç•ªç”¨ï¼‰
FROM node:18-alpine AS base

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
FROM base AS deps
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

# ãƒ“ãƒ«ãƒ‰
FROM base AS builder
WORKDIR /app
COPY . .
COPY --from=deps /app/node_modules ./node_modules
RUN npm run build

# å®Ÿè¡Œ
FROM base AS runner
WORKDIR /app
RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs
EXPOSE 3000
ENV PORT 3000

CMD ["node", "server.js"]
```

### CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
```yaml
# .github/workflows/deploy.yml
name: Deploy Frontend

on:
  push:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run lint
      - run: npm run type-check
      - run: npm run test:unit
      - run: npm run test:e2e

  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: docker build -t inventory-frontend .
      - run: docker push registry/inventory-frontend:${{ github.sha }}

  deploy:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - run: kubectl set image deployment/frontend frontend=registry/inventory-frontend:${{ github.sha }}
```

---

## ğŸ” ç›£è¦–ãƒ»ãƒ­ã‚°è¨­è¨ˆ

### ã‚¨ãƒ©ãƒ¼ç›£è¦–
```typescript
// ã‚¨ãƒ©ãƒ¼è¿½è·¡è¨­å®š
import * as Sentry from '@sentry/nextjs'

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 1.0,
})

// ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼å¢ƒç•Œ
class ErrorBoundary extends Component {
  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    Sentry.captureException(error, { contexts: { react: errorInfo } })
  }
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```typescript
// Web Vitals ç›£è¦–
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals'

function sendToAnalytics(metric: Metric) {
  // Google Analytics 4 ã¾ãŸã¯ç‹¬è‡ªåˆ†æåŸºç›¤ã«é€ä¿¡
  gtag('event', metric.name, {
    value: Math.round(metric.name === 'CLS' ? metric.value * 1000 : metric.value),
    event_label: metric.id,
  })
}

getCLS(sendToAnalytics)
getFID(sendToAnalytics)
getFCP(sendToAnalytics)
getLCP(sendToAnalytics)
getTTFB(sendToAnalytics)
```

### ãƒ­ã‚°è¨­è¨ˆ
```typescript
// æ§‹é€ åŒ–ãƒ­ã‚°
interface LogEntry {
  timestamp: string
  level: 'debug' | 'info' | 'warn' | 'error'
  message: string
  userId?: string
  action?: string
  metadata?: Record<string, any>
}

class Logger {
  static info(message: string, metadata?: Record<string, any>): void {
    const entry: LogEntry = {
      timestamp: new Date().toISOString(),
      level: 'info',
      message,
      userId: getCurrentUser()?.id?.toString(),
      metadata
    }
    console.log(JSON.stringify(entry))
  }

  static error(message: string, error?: Error, metadata?: Record<string, any>): void {
    const entry: LogEntry = {
      timestamp: new Date().toISOString(),
      level: 'error',
      message,
      userId: getCurrentUser()?.id?.toString(),
      metadata: {
        ...metadata,
        error: error?.message,
        stack: error?.stack
      }
    }
    console.error(JSON.stringify(entry))
    
    // ã‚¨ãƒ©ãƒ¼ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹ã«é€ä¿¡
    if (error) Sentry.captureException(error, { extra: metadata })
  }
}
```

---

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨­è¨ˆ

### Storybookè¨­å®š
```typescript
// .storybook/main.ts
import type { StorybookConfig } from '@storybook/react'

const config: StorybookConfig = {
  stories: ['../src/**/*.stories.@(js|jsx|ts|tsx|mdx)'],
  addons: [
    '@storybook/addon-essentials',
    '@storybook/addon-a11y',
    '@storybook/addon-docs'
  ],
  framework: {
    name: '@storybook/react-webpack5',
    options: {}
  }
}

export default config
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¾‹
```typescript
// Button.stories.tsx
import type { Meta, StoryObj } from '@storybook/react'
import { Button } from './Button'

const meta: Meta<typeof Button> = {
  title: 'UI/Button',
  component: Button,
  parameters: {
    docs: {
      description: {
        component: 'ãƒ—ãƒ©ã‚¤ãƒãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã®ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ'
      }
    }
  },
  argTypes: {
    variant: {
      control: 'select',
      options: ['primary', 'secondary', 'danger']
    }
  }
}

export default meta
type Story = StoryObj<typeof Button>

export const Primary: Story = {
  args: {
    variant: 'primary',
    children: 'ä¿å­˜'
  }
}

export const WithPermission: Story = {
  args: {
    variant: 'primary',
    children: 'å‰Šé™¤',
    requiredPermissions: ['inventory.delete']
  },
  parameters: {
    docs: {
      description: {
        story: 'æ¨©é™åˆ¶å¾¡æ©Ÿèƒ½ä»˜ãã®ãƒœã‚¿ãƒ³ä¾‹'
      }
    }
  }
}
```

### API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```typescript
// å‹å®šç¾©ã‹ã‚‰APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
/**
 * çµ±åˆå…¥è·å‡¦ç†API
 * 
 * @route POST /api/inventory/:part_code/integrated-receipt
 * @param part_code - éƒ¨å“ã‚³ãƒ¼ãƒ‰
 * @body IntegratedReceiptRequest
 * @returns IntegratedReceiptResponse
 * @requires permissions: inventory.create
 * @example
 * ```typescript
 * const result = await api.post('/api/inventory/SUS304-M6-25-HEX/integrated-receipt', {
 *   quantity: 50,
 *   supplier: 'Sample Supplier',
 *   receipt_date: '2025-08-15'
 * })
 * ```
 */
```

---

## ğŸš€ å®Ÿè£…å„ªå…ˆé †ä½

### ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥è©³ç´°è¨ˆç”»

#### Phase 1: åŸºç›¤å¼·åŒ–ï¼ˆWeek 1-2ï¼‰
1. **å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
   - Button, Input, Select, Modal, Alert
   - Table, Pagination, Loading, Error
   - Form validation with React Hook Form + Zod

2. **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ã‚¹ãƒ†ãƒ **
   - Headerï¼ˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰
   - Sidebarï¼ˆãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€æ¨©é™åˆ¶å¾¡ï¼‰
   - Breadcrumbï¼ˆãƒ‘ãƒ³ããšãƒŠãƒ“ï¼‰

3. **ãƒ‡ãƒ¼ã‚¿ç®¡ç†åŸºç›¤**
   - TanStack Query ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   - Service layer å®Ÿè£…
   - Error boundary, Loading states

#### Phase 2: åœ¨åº«ç®¡ç†ï¼ˆWeek 3-5ï¼‰
1. **åœ¨åº«ä¸€è¦§ç”»é¢** `/inventory/list`
   - æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½
   - ã‚½ãƒ¼ãƒˆãƒ»ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
   - åœ¨åº«ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
   - CSV ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

2. **çµ±åˆå…¥è·å‡¦ç†ç”»é¢** `/inventory/receipt`
   - éƒ¨å“ã‚³ãƒ¼ãƒ‰æ¤œç´¢
   - äºˆå®šå…¥è·é€£æº
   - ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³å¯¾å¿œæº–å‚™
   - å‡¦ç†çµæœç¢ºèª

3. **åœ¨åº«å±¥æ­´ç”»é¢** `/inventory/transactions`
   - å–å¼•å±¥æ­´è¡¨ç¤º
   - è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿
   - æœŸé–“æŒ‡å®šæ¤œç´¢

#### Phase 3: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆWeek 6-7ï¼‰
1. **KPI ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
   - åœ¨åº«çŠ¶æ³ã‚µãƒãƒªãƒ¼
   - ä¸è¶³éƒ¨å“ã‚¢ãƒ©ãƒ¼ãƒˆ
   - æœ€è¿‘ã®æ´»å‹•
   - ãƒãƒ£ãƒ¼ãƒˆãƒ»ã‚°ãƒ©ãƒ•è¡¨ç¤º

2. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**
   - ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆæœ€é©åŒ–
   - ã‚¿ãƒƒãƒæ“ä½œå¯¾å¿œ

#### Phase 4: ç”Ÿç”£è¨ˆç”»ï¼ˆWeek 8-10ï¼‰
1. **ç”Ÿç”£è¨ˆç”»ç®¡ç†**
   - è¨ˆç”»ä¸€è¦§ãƒ»ä½œæˆãƒ»ç·¨é›†
   - æ‰€è¦é‡è¨ˆç®—
   - åœ¨åº«äºˆç´„æ©Ÿèƒ½

2. **BOM ç®¡ç†**
   - BOM è¡¨ç¤ºãƒ»ç·¨é›†
   - éƒ¨å“å±•é–‹

#### Phase 5: èª¿é”ç®¡ç†ï¼ˆWeek 11-12ï¼‰
1. **äºˆå®šå…¥è·ç®¡ç†**
   - ç™ºæ³¨ç™»éŒ²ãƒ»æ›´æ–°
   - ç´æœŸç®¡ç†
   - ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼é€£æº

2. **ç™ºæ³¨ã‚¢ãƒ©ãƒ¼ãƒˆ**
   - è‡ªå‹•ç™ºæ³¨ææ¡ˆ
   - åœ¨åº«ä¸è¶³è­¦å‘Š

#### Phase 6: ãƒã‚¹ã‚¿ç®¡ç†ï¼ˆWeek 13-14ï¼‰
1. **éƒ¨å“ãƒã‚¹ã‚¿**
   - éƒ¨å“ç™»éŒ²ãƒ»æ›´æ–°ãƒ»å‰Šé™¤
   - ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†**ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ CRUD
   - æ¨©é™è¨­å®š

#### Phase 7: æœ€é©åŒ–ãƒ»é‹ç”¨ï¼ˆWeek 15-16ï¼‰
1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
   - ä»®æƒ³åŒ–å®Ÿè£…
   - ç”»åƒæœ€é©åŒ–
   - Bundle ã‚µã‚¤ã‚ºæœ€é©åŒ–

2. **ãƒ†ã‚¹ãƒˆãƒ»å“è³ªä¿è¨¼**
   - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š
   - E2E ãƒ†ã‚¹ãƒˆå®Ÿè£…
   - ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ

3. **é‹ç”¨æº–å‚™**
   - ç›£è¦–ãƒ»ãƒ­ã‚°è¨­å®š
   - ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè‡ªå‹•åŒ–
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

---

## ğŸ“‹ æˆæœç‰©ãƒ»ç´å“ç‰©

### ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹
- [ ] Next.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] TypeScript å‹å®šç¾©
- [ ] Storybook ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [ ] ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆï¼ˆUnit/Integration/E2Eï¼‰

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ ] API ä»•æ§˜æ›¸
- [ ] ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜æ›¸
- [ ] é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
- [ ] é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚¤ãƒ³ãƒ•ãƒ©
- [ ] Docker è¨­å®š
- [ ] CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- [ ] ç›£è¦–ãƒ»ãƒ­ã‚°è¨­å®š
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
