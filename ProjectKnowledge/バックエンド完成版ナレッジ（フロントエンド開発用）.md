# ğŸ“‹ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Œæˆç‰ˆãƒŠãƒ¬ãƒƒã‚¸ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºç”¨ï¼‰

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIå®Œæˆç‰ˆ**
- **ç›®çš„**: è£½é€ æ¥­å‘ã‘åœ¨åº«ãƒ»èª¿é”ãƒ»ç”Ÿç”£è¨ˆç”»ç®¡ç†
- **æŠ€è¡“**: Node.js + Express.js + MySQL
- **èªè¨¼**: JWTèªè¨¼ + ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹æ¨©é™ç®¡ç†
- **ç‰¹å¾´**: çµ±åˆå…¥è·å‡¦ç†APIå®Ÿè£…æ¸ˆã¿ï¼ˆ2æ®µéšå‡¦ç†å•é¡Œè§£æ±ºï¼‰

## ğŸ— ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### ã‚µãƒ¼ãƒãƒ¼æ§‹æˆ
```
ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/           # APIãƒ«ãƒ¼ãƒˆï¼ˆå…¨çµ±ä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨æ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ middleware/       # èªè¨¼ãƒ»æ¨©é™ç®¡ç†
â”‚   â””â”€â”€ utils/           # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”œâ”€â”€ sql/                 # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šãƒ»åˆæœŸãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ docker-compose.yml   # Dockerç’°å¢ƒ
â””â”€â”€ server.js           # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 
- **MySQL 8.0** (Dockerç’°å¢ƒ)
- **UTF-8å¯¾å¿œ** (charset: utf8mb4)
- **ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«**: users, parts, inventory, scheduled_receipts, production_plans, bom_items

## ğŸ” èªè¨¼ãƒ»æ¨©é™ã‚·ã‚¹ãƒ†ãƒ 

### æ¨©é™ãƒ¬ãƒ™ãƒ«
```javascript
// æ¨©é™ãƒãƒˆãƒªãƒƒã‚¯ã‚¹
admin              // å…¨æ¨©é™
production_manager // ç”Ÿç”£è¨ˆç”»ãƒ»BOMç®¡ç†
material_staff     // åœ¨åº«ãƒ»å…¥å‡ºåº«ãƒ»æ£šãŠã‚ã—
viewer            // å‚ç…§ã®ã¿
```

### èªè¨¼ãƒ•ãƒ­ãƒ¼
```bash
# ãƒ­ã‚°ã‚¤ãƒ³
POST /api/auth/login
Body: {"username": "admin", "password": "admin123"}
Response: {"token": "JWT_TOKEN", "user": {...}}

# APIå‘¼ã³å‡ºã—
Header: "Authorization: Bearer JWT_TOKEN"
```

## ğŸ“¡ APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

### ğŸ”’ èªè¨¼API
- `POST /api/auth/login` - ãƒ­ã‚°ã‚¤ãƒ³

### ğŸ“¦ åœ¨åº«ç®¡ç†API
- `GET /api/inventory` - åœ¨åº«ä¸€è¦§
- `POST /api/inventory/:part_code/receipt` - å¾“æ¥å…¥è·å‡¦ç†
- `POST /api/inventory/:part_code/integrated-receipt` - **çµ±åˆå…¥è·å‡¦ç†ï¼ˆæ–°æ©Ÿèƒ½ï¼‰**
- `POST /api/inventory/:part_code/issue` - å‡ºåº«å‡¦ç†

### ğŸ“‹ äºˆå®šå…¥è·API
- `GET /api/scheduled-receipts` - äºˆå®šå…¥è·ä¸€è¦§
- `POST /api/scheduled-receipts` - ç™ºæ³¨ç™»éŒ²
- `PUT /api/scheduled-receipts/:id/delivery-response` - ç´æœŸå›ç­”
- `PUT /api/scheduled-receipts/:id/mark-received` - å…¥è·å®Ÿç¸¾åæ˜ ï¼ˆå¾“æ¥ï¼‰

### ğŸ” åˆ©ç”¨å¯èƒ½åœ¨åº«API
- `GET /api/available-inventory` - å…¨éƒ¨å“åˆ©ç”¨å¯èƒ½åœ¨åº«
- `GET /api/available-inventory/:part_code` - éƒ¨å“åˆ¥è©³ç´°

### ğŸ­ ç”Ÿç”£è¨ˆç”»API
- `GET /api/plans` - ç”Ÿç”£è¨ˆç”»ä¸€è¦§
- `POST /api/plans` - ç”Ÿç”£è¨ˆç”»ç™»éŒ²ï¼ˆåœ¨åº«äºˆç´„ä»˜ãï¼‰
- `POST /api/plans/:id/requirements` - æ‰€è¦é‡è¨ˆç®—

### ğŸ”§ éƒ¨å“ãƒã‚¹ã‚¿API
- `GET /api/parts` - éƒ¨å“ä¸€è¦§
- `POST /api/parts` - éƒ¨å“ç™»éŒ²

### ğŸ“Š BOMç®¡ç†API
- `GET /api/bom/products` - è£½å“ä¸€è¦§
- `GET /api/bom/products/:productCode/stations/:stationCode/parts` - ä½¿ç”¨éƒ¨å“ä¸€è¦§
- `POST /api/bom/items` - BOMé …ç›®è¿½åŠ 

### ğŸ“ˆ ãƒ¬ãƒãƒ¼ãƒˆAPI
- `GET /api/reports/dashboard` - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `GET /api/reports/shortage-parts` - ä¸è¶³éƒ¨å“ãƒ¬ãƒãƒ¼ãƒˆ
- `GET /api/reports/scheduled-receipts` - äºˆå®šå…¥è·ãƒ¬ãƒãƒ¼ãƒˆ

## âš¡ é‡è¦ãªå®Ÿè£…æˆæœ

### ğŸ”„ çµ±åˆå…¥è·å‡¦ç†APIï¼ˆæœ€é‡è¦ï¼‰
**å¾“æ¥ã®å•é¡Œ**: 2æ®µéšå‡¦ç†ï¼ˆäºˆå®šå…¥è·ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–° + åœ¨åº«æ›´æ–°ï¼‰ã®ç…©ã‚ã—ã•
**è§£æ±ºç­–**: 1å›ã®APIå‘¼ã³å‡ºã—ã§å®Œçµã™ã‚‹çµ±åˆå‡¦ç†

```javascript
// çµ±åˆå…¥è·å‡¦ç†API
POST /api/inventory/:part_code/integrated-receipt
{
  "quantity": 45,
  "supplier": "Test_Supplier",
  "receipt_date": "2025-08-15",
  "scheduled_receipt_id": 123,  // äºˆå®šå…¥è·é€£æºæ™‚ã®ã¿
  "remarks": "çµ±åˆå‡¦ç†ãƒ†ã‚¹ãƒˆ"
}
```

**åˆ©ç‚¹**:
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Šï¼ˆ1å›ã§å®Œçµï¼‰
- âœ… ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ä¿è¨¼ï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
- âœ… é‹ç”¨ãƒŸã‚¹å‰Šæ¸›
- âœ… æ—¢å­˜APIäº’æ›æ€§ç¶­æŒ

### ğŸ›¡ çµ±ä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨
å…¨APIãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨æ¸ˆã¿ï¼š
- **DBæ¥ç¶š**: mysql2/promiseæ–¹å¼
- **èªè¨¼ä¿è­·**: authenticateToken + æ¨©é™ãƒã‚§ãƒƒã‚¯
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: try-catch-finally + è‡ªå‹•ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼**: {success, data, message}çµ±ä¸€

## ğŸ§ª ãƒ†ã‚¹ãƒˆãƒ»å‹•ä½œç¢ºèª

### åŸºæœ¬ãƒ†ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼
```bash
# 1. èªè¨¼å–å¾—
./login.sh admin
export TOKEN="å–å¾—ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³"

# 2. åœ¨åº«ç¢ºèª
curl -H "Authorization: Bearer $TOKEN" "http://localhost:3000/api/inventory"

# 3. çµ±åˆå…¥è·å‡¦ç†ãƒ†ã‚¹ãƒˆ
curl -X POST \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"quantity":10,"supplier":"Test","receipt_date":"2025-07-30"}' \
  "http://localhost:3000/api/inventory/SUS304-M6-20-HEX/integrated-receipt"
```

## ğŸŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºå‘ã‘æƒ…å ±

### æ¨å¥¨æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **React 18 + TypeScript**
- **Next.js 14** (App Router)
- **Tailwind CSS** (ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°)
- **React Hook Form** (ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†)
- **TanStack Query** (APIçŠ¶æ…‹ç®¡ç†)

### APIé€£æºãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// APIå‘¼ã³å‡ºã—ä¾‹ï¼ˆTypeScriptï¼‰
const response = await fetch('/api/inventory', {
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  }
});
const data = await response.json();
```

### ç”»é¢è¨­è¨ˆå„ªå…ˆé †ä½
1. **ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢** - JWTèªè¨¼
2. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** - å„ç¨®ã‚µãƒãƒªãƒ¼è¡¨ç¤º
3. **åœ¨åº«ç®¡ç†ç”»é¢** - ä¸€è¦§ãƒ»è©³ç´°ãƒ»æ›´æ–°
4. **çµ±åˆå…¥è·å‡¦ç†ç”»é¢** - æ–°APIã®æ´»ç”¨
5. **äºˆå®šå…¥è·ç®¡ç†ç”»é¢** - ç™ºæ³¨ã€œå…¥è·ãƒ•ãƒ­ãƒ¼
6. **ç”Ÿç”£è¨ˆç”»ç”»é¢** - è¨ˆç”»ç™»éŒ²ãƒ»æ‰€è¦é‡è¨ˆç®—

## ğŸ“š é‡è¦ãªæŠ€è¡“çŸ¥è­˜

### JWTèªè¨¼å®Ÿè£…
- **ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜**: localStorageæ¨å¥¨ï¼ˆé–‹ç™ºç”¨ï¼‰
- **è‡ªå‹•æ›´æ–°**: ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³å®Ÿè£…æ¨å¥¨
- **æ¨©é™åˆ¶å¾¡**: ãƒ«ãƒ¼ãƒˆã‚¬ãƒ¼ãƒ‰å®Ÿè£…

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **401 Unauthorized**: ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- **403 Forbidden**: æ¨©é™ä¸è¶³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **500 Server Error**: æ±ç”¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### ãƒ‡ãƒ¼ã‚¿å‹å®šç¾©ï¼ˆTypeScriptç”¨ï¼‰
```typescript
// åŸºæœ¬ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  message: string;
  error?: string;
}

// åœ¨åº«ãƒ‡ãƒ¼ã‚¿å‹
interface InventoryItem {
  part_code: string;
  current_stock: number;
  reserved_stock: number;
  available_stock: number;
  // ...
}
```

## ğŸš€ æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚º

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºè¨ˆç”»
1. **Phase 1**: Next.jsç’°å¢ƒæ§‹ç¯‰ãƒ»èªè¨¼å®Ÿè£…
2. **Phase 2**: åŸºæœ¬CRUDç”»é¢å®Ÿè£…
3. **Phase 3**: çµ±åˆå…¥è·å‡¦ç†UIå®Ÿè£…
4. **Phase 4**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»åˆ†æç”»é¢
5. **Phase 5**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œãƒ»æœ€é©åŒ–

### å¾Œå›ã—ã«ã—ãŸæ©Ÿèƒ½ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Œæˆå¾Œï¼‰
- æ£šãŠã‚ã—æ©Ÿèƒ½çµ±åˆ
- å…±é€šå‡¦ç†æŠ½å‡ºãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£åŒ–
- BOMå±•é–‹å‡¦ç†æœ€é©åŒ–
- é«˜åº¦ãªåˆ†ææ©Ÿèƒ½

## ğŸ›  é–‹ç™ºç’°å¢ƒæƒ…å ±

### Dockerç’°å¢ƒ
```bash
# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
docker-compose up -d

# ãƒ­ã‚°ç¢ºèª
docker-compose logs -f

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
docker exec -it inventory_mysql mysql -u root -p inventory_db
```

### é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«
- `src/routes/inventory.js` - çµ±åˆå…¥è·å‡¦ç†APIå®Ÿè£…
- `src/middleware/auth.js` - èªè¨¼ãƒ»æ¨©é™ç®¡ç†
- `sql/` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸè¨­å®šãƒ»ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿

---

## ğŸ“ å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

### è§£æ±ºã—ãŸä¸»è¦èª²é¡Œ
1. **2æ®µéšå‡¦ç†å•é¡Œ** â†’ çµ±åˆAPIå®Ÿè£…
2. **èªè¨¼ãƒ»æ¨©é™ç®¡ç†** â†’ JWT + ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å®Ÿè£…
3. **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§** â†’ ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ä¿è¨¼
4. **APIè¨­è¨ˆçµ±ä¸€** â†’ å…¨ãƒ•ã‚¡ã‚¤ãƒ«çµ±ä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨

### æŠ€è¡“ã‚¹ã‚­ãƒ«ç¿’å¾—
- Node.js/Express.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ
- MySQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»æ“ä½œ
- JWTèªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- RESTful APIè¨­è¨ˆãƒ»å®Ÿè£…
- Dockerç’°å¢ƒæ§‹ç¯‰
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ­ã‚®ãƒ³ã‚°